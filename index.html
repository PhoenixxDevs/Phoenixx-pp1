<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Phoenixx</title>
    <!-- Stylesheet  -->
    <link rel="stylesheet" href="assets/css/style.css" />
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Glory:ital,wght@0,400;0,600;0,700;1,700&family=Inter+Tight:wght@300;400;500;600;700;800;900&family=Qwitcher+Grypen:wght@700&display=swap"
      rel="stylesheet"
    />
    <!-- Font Awesome -->
    <script
      src="https://kit.fontawesome.com/1e38aabce3.js"
      crossorigin="anonymous"
    ></script>
    <!-- Script -> Particles -->
    <script type="text/javascript" src="assets/js/app.js" defer></script>
  </head>
  <body>
    <header>
      <div
        class="title-main fade-in"
        id="title"
        onclick="handleSectionChange('home')"
      >
        <h1>Phoenixx</h1>
      </div>
      <div class="nav-container" id="nav-container">
        <ul class="nav">
          <il
            class="nav-element"
            onclick="handleSectionChange('events')"
            id="events"
            >Events</il
          >
          <il
            class="nav-element"
            onclick="handleSectionChange('about')"
            id="about"
            >About</il
          >
          <il
            class="nav-element"
            onclick="handleSectionChange('connect')"
            id="connect"
            >Connect</il
          >
          <il
            class="nav-element"
            onclick="handleSectionChange('gallery')"
            id="gallery"
            >Gallery</il
          >
        </ul>
      </div>
    </header>
    <section class="home fade-in" id="home-section">
      <div class="container-ep-art">
        <img
          src="assets/img/phoenixx-self-titled.png"
          alt="Album Artwork for Self Titled by Phoenixx"
        />
      </div>
    </section>
    <section class="events hidden"></section>
    <footer>
      <img
        id="sitback"
        src="assets/img/sitback.png"
        alt="A picture of a sat watching the stars"
      />
      <div class="copyright-info fade-in">
        Copyright &#169; <br />
        Phoenixx 2023
      </div>
      <div class="links-social fade-in" id="links-social">
        <ul>
          <li class="spotify point-at">
            <a
              href="https://www.spotify.com"
              target="_blank"
              aria-label="Link to Spotify. Opens in a new tab."
            >
              <i class="fa-brands fa-spotify"></i>
            </a>
          </li>
          <li>
            <a
              href="https://www.instagram.com"
              target="_blank"
              aria-label="Link to Instagram. Opens in a new tab."
            >
              <i class="fa-brands fa-instagram"></i>
            </a>
          </li>
          <li>
            <a
              href="https://www.facebook.com"
              target="_blank"
              aria-label="Link to Facebook. Opens in a new tab."
            >
              <i class="fa-brands fa-facebook"></i>
            </a>
          </li>
          <li>
            <a
              href="https://www.youtube.com"
              target="_blank"
              aria-label="Link to YouTube. Opens in a new tab."
            >
              <i class="fa-brands fa-youtube"></i>
            </a>
          </li>
        </ul>
      </div>
    </footer>
    <canvas id="canvas"></canvas>
    <script>
      const homeSection = document.getElementById("home-section");
      const title = document.getElementById("title");
      const header = document.querySelector("header");
      const navContainer = document.getElementById("nav-container");
      const linksSocial = document.getElementById("links-social");
      const navChildren = navContainer.children[0].children;
      const eventsNav = navChildren[0];
      const aboutNav = navChildren[1];
      const connectNav = navChildren[2];
      const galleryNav = navChildren[3];
      const socialElements = linksSocial.children[0].children;

      const customClasses = {
        hidden: "hidden",
        active: "active",
        navResponsive: "nav-responsive",
        titleResponsive: "title-responsive",
      };

      function toggleSocials(state) {
        // Cycle through all elements in social link list and set display none
        for (let i = 0; i < socialElements.length; i++) {
          toggleElementClass(socialElements[i], customClasses.hidden, state);
        }
      }

      function toggleElementClass(element, className, state) {
        // if state then add, else remove
        state
          ? element.classList.add(className)
          : element.classList.remove(className);
      }

      function pageReformat(section) {
        if (section != "home") {
          toggleElementClass(homeSection, customClasses.hidden, 1); //hide home section
          toggleElementClass(title, customClasses.titleResponsive, 1); // move phoenixx
          navContainer.appendChild(title); // move title to nav container
          console.log(navContainer);
          if (window.innerWidth < 1024) {
            // If tablet or below make burger menu
            toggleElementClass(navContainer, customClasses.navResponsive, 1);
            if (window.innerWidth < 768) {
              // If mobile or below hide socials
              toggleSocials(1);
              // If gallery, keep Instagram
              section === "gallery"
                ? toggleElementClass(socialElements[1], customClasses.hidden, 0)
                : toggleElementClass(
                    socialElements[1],
                    customClasses.hidden,
                    1
                  );
            }
          }
        } else {
          toggleElementClass(homeSection, customClasses.hidden, 0); //hide home section
          toggleElementClass(title, customClasses.titleResponsive, 0); // move phoenixx
          header.appendChild(title); // move title to original position
          header.appendChild(navContainer); // move title to original position
          if (window.innerWidth < 1024) {
            // If tablet or below remove burger menu
            toggleElementClass(navContainer, customClasses.navResponsive, 0);
            toggleElementClass(navContainer, customClasses.active, 0);
            if (window.innerWidth < 768) {
              // If mobile or below show socials
              toggleSocials(0);
            }
          }
        }
      }

      function setActiveSection(section) {
        // Turns off active class on all sections apart from current
        if (section === "home") {
          toggleElementClass(navContainer.children[0], customClasses.active, 0);
          for(let j = 0; j < navChildren.length; j++) {
            console.log(navChildren[j]);
            toggleElementClass(navChildren[j], customClasses.active, 0);
            toggleElementClass(navChildren[j], customClasses.hidden, 0);
          }
        } else {
          for (let i = 0; i < navChildren.length; i++) {
            toggleElementClass(navChildren[i], customClasses.active, 0);
            if (section === navChildren[i].id) {
              // stops current page label from being hidden
              continue;
            } else {
              toggleElementClass(navChildren[i], customClasses.hidden, 1); // hide all other page labels for making burger menu
            }
          }
        }
        switch (section) {
          case "events":
            toggleElementClass(eventsNav, customClasses.active, 1);
            toggleElementClass(
              navContainer.children[0],
              customClasses.active,
              1
            );
            break;
          case "about":
            toggleElementClass(aboutNav, customClasses.active, 1);
            toggleElementClass(
              navContainer.children[0],
              customClasses.active,
              1
            );
            break;
          case "connect":
            toggleElementClass(connectNav, customClasses.active, 1);
            toggleElementClass(
              navContainer.children[0],
              customClasses.active,
              1
            );
            break;
          case "gallery":
            toggleElementClass(galleryNav, customClasses.active, 1);
            toggleElementClass(
              navContainer.children[0],
              customClasses.active,
              1
            );
            break;
          case "home":
            break;
        }
      }

      function handleSectionChange(section) {
        switch (section) {
          case "events":
            pageReformat(section);
            setActiveSection("events");
            break;
          case "about":
            pageReformat(section);
            setActiveSection("about");
            break;
          case "connect":
            pageReformat(section);
            setActiveSection("connect");
            break;
          case "gallery":
            pageReformat(section);
            setActiveSection("gallery");
            break;
          case "home":
            pageReformat(section);
            setActiveSection("home");
            break;
        }
      }
    </script>
  </body>
</html>
