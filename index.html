<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Phoenixx</title>
    <!-- Stylesheet  -->
    <link rel="stylesheet" href="assets/css/style.css" />
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Glory:ital,wght@0,400;0,600;0,700;1,700&family=Inter+Tight:wght@300;400;500;600;700;800;900&family=Qwitcher+Grypen:wght@700&display=swap"
      rel="stylesheet"
    />
    <!-- Font Awesome -->
    <script
      src="https://kit.fontawesome.com/1e38aabce3.js"
      crossorigin="anonymous"
    ></script>
    <!-- Script -> Particles -->
    <script type="text/javascript" src="assets/js/app.js" defer></script>
  </head>
  <body>
    <header>
      <div
        class="title-main fade-in"
        id="title"
        onclick="handleSectionChange('home')"
      >
        <h1>Phoenixx</h1>
      </div>
      <div class="nav-container" id="nav-container">
        <ul class="nav fade-in">
          <il
            class="nav-element"
            onclick="handleSectionChange('events')"
            id="events"
            >Events</il
          >
          <il
            class="nav-element"
            onclick="handleSectionChange('about')"
            id="about"
            >About</il
          >
          <il
            class="nav-element"
            onclick="handleSectionChange('connect')"
            id="connect"
            >Connect</il
          >
          <il
            class="nav-element"
            onclick="handleSectionChange('gallery')"
            id="gallery"
            >Gallery</il
          >
        </ul>
        <div>
            <div id="burger" class="burger hidden" onclick="handleBurger()">
            <div class="bar bar-1"></div>
            <div class="bar bar-2"></div>
            <div class="bar bar-3"></div>
          </div>
          <div id="nav-container-burger" class="nav-container-burger hidden"></div>
        </div>
      </div>
    </header>
    <section class="home fade-in" id="section-home">
      <div class="container-ep-art">
        <a
          href="https://open.spotify.com/album/5hILJsRqiJY2E9GlVoTGiO?si=d9d8e1b5c368496b"
          target="_blank"
          aria-label="Link to Some Album on Spotify. Opens in a new tab."
        >
          <img
            src="assets/img/phoenixx-self-titled.png"
            alt="Album Artwork for Self Titled by Phoenixx"
          />
        </a>
      </div>
    </section>
    <section class="events" id="section-events">
      <div class="event-item">
        <div class="event-location">
          <div>Lon</div>
        </div>
        <div class="event-details">
          <p>
            Where: <a href="https://bushhallmusic.co.uk/" target="_blank" aria-label="Bush Hall's website, opens in new tab.">Bush Hall</a><br>
            When: <span>12/07/24</span> - Doors at <span>20:00</span>
          </p>
        </div>
        <button><strong><em>Tickets!</em></strong></button>
      </div>
      <div class="event-item">
        <div class="event-location">
          <div>Lon</div>
        </div>
        <div class="event-details">
          <p>
            Where: <a href="https://www.academymusicgroup.com/o2academybrixton/" target="_blank" aria-label="Brixton's section of Academy Music Group's website, opens in new tab.">O2 Academy Brixton</a><br>
            When: <span>14/07/24</span> - Doors at <span>19:00</span>
          </p>
        </div>
        <button><strong><em>Tickets!</em></strong></button>
      </div>
      <div class="event-item">
        <div class="event-location">
          <div>Lon</div>
        </div>
        <div class="event-details">
          <p>
            Where: <a href="https://bushhallmusic.co.uk/" target="_blank" aria-label="Bush Hall's website, opens in new tab.">Bush Hall</a><br>
            When: <span>12/07/24</span> - Doors at <span>20:00</span>
          </p>
        </div>
        <button><strong><em>Tickets!</em></strong></button>
      </div>
      <div class="event-item">
        <div class="event-location">
          <div>Man</div>
        </div>
        <div class="event-details">
          <p>
            Where: <a href="https://bushhallmusic.co.uk/" target="_blank" aria-label="Bush Hall's website, opens in new tab.">Bush Hall</a><br>
            When: <span>12/07/24</span> - Doors at <span>20:00</span>
          </p>
        </div>
        <button><strong><em>Tickets!</em></strong></button>
      </div>
      <div class="event-item">
        <div class="event-location">
          <div>Man</div>
        </div>
        <div class="event-details">
          <p>
            Where: <a href="https://bushhallmusic.co.uk/" target="_blank" aria-label="Bush Hall's website, opens in new tab.">Bush Hall</a><br>
            When: <span>12/07/24</span> - Doors at <span>20:00</span>
          </p>
        </div>
        <button><strong><em>Tickets!</em></strong></button>
      </div>
      <div class="event-item">
        <div class="event-location">
          <div>Man</div>
        </div>
        <div class="event-details">
          <p>
            Where: <a href="https://bushhallmusic.co.uk/" target="_blank" aria-label="Bush Hall's website, opens in new tab.">Bush Hall</a><br>
            When: <span>12/07/24</span> - Doors at <span>20:00</span>
          </p>
        </div>
        <button><strong><em>Tickets!</em></strong></button>
      </div>
    </section>
    <section class="about" id="section-about"></section>
    <section class="gallery" id="section-gallery"></section>
    <section class="connect" id="section-connect"></section>
    <footer>
      <img
        id="sitback"
        src="assets/img/sitback.png"
        alt="A picture of a sat watching the stars"
      />
      <div class="copyright-info fade-in">
        Copyright &#169; <br />
        Phoenixx 2023
      </div>
      <div class="links-social fade-in" id="links-social">
        <ul>
          <li class="spotify point-at">
            <a
              href="https://www.spotify.com"
              target="_blank"
              aria-label="Link to Spotify. Opens in a new tab."
            >
              <i class="fa-brands fa-spotify"></i>
            </a>
          </li>
          <li>
            <a
              href="https://www.instagram.com"
              target="_blank"
              aria-label="Link to Instagram. Opens in a new tab."
            >
              <i class="fa-brands fa-instagram"></i>
            </a>
          </li>
          <li>
            <a
              href="https://www.facebook.com"
              target="_blank"
              aria-label="Link to Facebook. Opens in a new tab."
            >
              <i class="fa-brands fa-facebook"></i>
            </a>
          </li>
          <li>
            <a
              href="https://www.youtube.com"
              target="_blank"
              aria-label="Link to YouTube. Opens in a new tab."
            >
              <i class="fa-brands fa-youtube"></i>
            </a>
          </li>
        </ul>
      </div>
    </footer>
    <canvas id="canvas"></canvas>
    <script>
      const homeSection = document.getElementById("section-home");
      const eventsSection = document.getElementById("section-events");
      const aboutSection = document.getElementById("section-about");
      const gallerySection = document.getElementById("section-gallery");
      const connectSection = document.getElementById("section-connect");
      const title = document.getElementById("title");
      const header = document.querySelector("header");
      const linksSocial = document.getElementById("links-social");
      const burger = document.getElementById("burger");
      const burgerNav = document.getElementById("nav-container-burger");
      const navContainer = document.getElementById("nav-container");
      const navChildren = navContainer.children[0].children;
      const eventsNav = navChildren[0];
      const aboutNav = navChildren[1];
      const connectNav = navChildren[2];
      const galleryNav = navChildren[3];
      const socialElements = linksSocial.children[0].children;

      const customClasses = {
        hidden: "hidden",
        active: "active",
        navResponsive: "nav-responsive",
        titleResponsive: "title-responsive",
        openMenu: "open-menu",
      };

      let navClone;
      let burgerOpen = false;

      function toggleSocials(state) {
        // Cycle through all elements in social link list and set display none
        for (let i = 0; i < socialElements.length; i++) {
          toggleElementClass(socialElements[i], customClasses.hidden, state);
        }
      }

      function toggleElementClass(element, className, state) {
        // if state then add, else remove
        state
          ? element.classList.add(className)
          : element.classList.remove(className);
      }

      function handleBurger() {
        for (let i = 0; i < burger.children.length; i++) {
          burger.children[i].classList.toggle(customClasses.openMenu);
        }
        if (!burgerOpen) {
          // clone current navigation
          navClone = navContainer.children[0].cloneNode(true);
          for (let j = 0; j < navClone.children.length; j++) {
            toggleElementClass(navClone.children[j], customClasses.hidden, 0);
          }
          // Find element with the "active" class and remove it
          const activeElement = navClone.querySelector(".active");
          if (activeElement) {
            navClone.removeChild(activeElement);
          }          
          burgerNav.appendChild(navClone);
          toggleElementClass(burgerNav, customClasses.hidden, 0);
          burgerOpen = true;
        } else {
          burgerNav.removeChild(navClone);
          toggleElementClass(burgerNav, customClasses.hidden, 1);
          burgerOpen = false;
        }
      }

      function pageReformat(section) {
        if (section != "home") {
          toggleElementClass(homeSection, customClasses.hidden, 1); //hide home section
          toggleElementClass(title, customClasses.titleResponsive, 1); // move phoenixx
          navContainer.appendChild(title); // move title to nav container
          if (window.innerWidth < 1024) {
            // If tablet or below make burger menu
            toggleElementClass(navContainer, customClasses.navResponsive, 1);
            toggleElementClass(burger, "hidden", 0);
            if (window.innerWidth < 768) {
              // If mobile or below hide socials
              toggleSocials(1);
              // If Gallery, keep Instagram
              section === "gallery"
                ? toggleElementClass(socialElements[1], customClasses.hidden, 0)
                : toggleElementClass(
                    socialElements[1],
                    customClasses.hidden,
                    1
                  );
            }
          }
        } else {
          toggleElementClass(homeSection, customClasses.hidden, 0); // show home section
          toggleElementClass(title, customClasses.titleResponsive, 0); // move phoenixx
          header.appendChild(title); // move title to original position
          header.appendChild(navContainer); // move nav to original position
          if (window.innerWidth < 1024) {
            // If tablet or below remove burger menu
            toggleElementClass(burger, "hidden", 1);
            toggleElementClass(navContainer, customClasses.navResponsive, 0);
            toggleElementClass(navContainer, customClasses.active, 0);
            if (window.innerWidth < 768) {
              // If mobile or below show socials
              toggleSocials(0);
            }
          }
        }
      }

      function removeActiveAllSections(){
        toggleElementClass(eventsSection, customClasses.active, 0);
        toggleElementClass(gallerySection, customClasses.active, 0);
        toggleElementClass(aboutSection, customClasses.active, 0);
        toggleElementClass(connectSection, customClasses.active, 0);
        toggleElementClass(homeSection, customClasses.active, 0);
      }

      function setActiveSection(section) {
        //HANDLES NAV HIDING
        // Turns off active class on all sections apart from current
        if (section === "home") {
          toggleElementClass(navContainer.children[0], customClasses.active, 0);
          for (let j = 0; j < navChildren.length; j++) {
            toggleElementClass(navChildren[j], customClasses.active, 0);
            toggleElementClass(navChildren[j], customClasses.hidden, 0);
          }
        } else {
          for (let i = 0; i < navChildren.length; i++) {
            toggleElementClass(navChildren[i], customClasses.active, 0);
            if (section === navChildren[i].id) {
              // stops current page label from being hidden
              continue;
            } else {
              toggleElementClass(navChildren[i], customClasses.hidden, 1); // hide all other page labels for making burger menu
            }
            // makes nav item appear from burger
            
          }
        }

        removeActiveAllSections();

        switch (section) {
          case "events":
            toggleElementClass(eventsNav, customClasses.active, 1);
            toggleElementClass(
              navContainer.children[0],
              customClasses.active,
              1
            );
            toggleElementClass(eventsSection, customClasses.active, 1);
            if(burgerOpen) {
              toggleElementClass(eventsNav, customClasses.hidden, 0);
            }
            break;
          case "about":
            toggleElementClass(aboutNav, customClasses.active, 1);
            toggleElementClass(
              navContainer.children[0],
              customClasses.active,
              1
            );
            if(burgerOpen) {
              toggleElementClass(aboutNav, customClasses.hidden, 0);
            }
            break;
          case "connect":
            toggleElementClass(connectNav, customClasses.active, 1);
            toggleElementClass(
              navContainer.children[0],
              customClasses.active,
              1
            );
            if(burgerOpen) {
              toggleElementClass(connectNav, customClasses.hidden, 0);
            }
            break;
          case "gallery":
            toggleElementClass(galleryNav, customClasses.active, 1);
            toggleElementClass(
              navContainer.children[0],
              customClasses.active,
              1
            );
            if(burgerOpen) {
              toggleElementClass(galleryNav, customClasses.hidden, 0);
            }
            break;
          case "home":
            break;
        }
      }

      function handleSectionChange(section) {
        switch (section) {
          case "events":
            pageReformat(section);
            setActiveSection("events");
            break;
          case "about":
            pageReformat(section);
            setActiveSection("about");
            break;
          case "connect":
            pageReformat(section);
            setActiveSection("connect");
            break;
          case "gallery":
            pageReformat(section);
            setActiveSection("gallery");
            break;
          case "home":
            pageReformat(section);
            setActiveSection("home");
            break;
        }
        if(burgerOpen){ handleBurger(); }
      }
    </script>
  </body>
</html>